{% extends 'base.html' %}

{% block title %}My Playlists{% endblock %}

{% block content %}
<div class="p-8">
    <div class="flex items-center justify-between mb-8">
        <h1 class="text-3xl font-bold text-white tracking-tight">My Playlists</h1>
        
        <!-- Form Buat Playlist -->
        <form action="{{ url_for('create_playlist') }}" method="POST" class="flex gap-2">
            <input type="text" name="name" placeholder="Nama Playlist Baru..." required
                   class="bg-neutral-800 border border-neutral-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:border-emerald-500 text-sm">
            <button type="submit" class="bg-emerald-500 hover:bg-emerald-400 text-black font-bold px-4 py-2 rounded-lg transition-colors text-sm">
                + Buat
            </button>
        </form>
    </div>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 px-4 py-3 rounded-lg mb-6 text-sm">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    {% if not playlists %}
        <div class="flex flex-col items-center justify-center h-64 border-2 border-dashed border-neutral-800 rounded-xl bg-neutral-900/50">
            <i data-lucide="music-4" class="w-12 h-12 text-neutral-700 mb-4"></i>
            <p class="text-neutral-500">Belum ada playlist. Buat satu sekarang!</p>
        </div>
    {% else %}
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
            {% for pl in playlists %}
            <!-- PERBAIKAN: Card dibungkus tag <a> agar mengarah ke route 'playlist_detail' -->
            <a href="{{ url_for('playlist_detail', playlist_id=pl['id']) }}" class="block bg-neutral-900/50 hover:bg-neutral-800 p-4 rounded-xl transition-all group cursor-pointer border border-white/5 hover:border-white/10">
                <div class="w-full aspect-square bg-neutral-800 rounded-lg mb-4 flex items-center justify-center shadow-lg relative overflow-hidden">
                    <!-- Icon Placeholder -->
                    <i data-lucide="list-music" class="w-12 h-12 text-neutral-600 group-hover:text-emerald-500 transition-colors"></i>
                    
                    <!-- Tombol Play Overlay (Visual Saja) -->
                    <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <div class="w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center shadow-xl transform translate-y-4 group-hover:translate-y-0 transition-transform">
                            <i data-lucide="play" class="w-6 h-6 fill-black stroke-black ml-1"></i>
                        </div>
                    </div>
                </div>
                
                <h3 class="text-white font-bold truncate">{{ pl['name'] }}</h3>
                <p class="text-sm text-neutral-500">Oleh {{ user.username }}</p>
            </a>
            {% endfor %}
        </div>
    {% endif %}
</div>
{% endblock %}